[phases.setup]
nixPkgs = ["python311", "gcc"]

[phases.install]
cmds = ["bash -lc 'if [ -f integrated-app/requirements.txt ]; then pip install --no-cache-dir -r integrated-app/requirements.txt; elif [ -f requirements.txt ]; then pip install --no-cache-dir -r requirements.txt; else echo No_requirements_file_found && exit 1; fi'"]

[start]
cmd = "bash -lc 'if [ -d integrated-app ]; then cd integrated-app; fi; uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}'"
